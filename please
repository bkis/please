#!/bin/bash

#################
#               #
#    PLEASE!    #
#               #
#################

#
#   [[ VARIABLES ]]
#

#PLS_FILE="$HOME/.please" # for production
PLS_FILE="dev/.please" # for development
PLS_FILE_COMMENT="# PLEASE! These are your saved terminal one-liners ..."
#PLS_ALIAS="alias please test # comment" # for production
PLS_ALIAS="alias pls='pwd' # comment" # for development
#PLS_BASHRC="$HOME/.bashrc" # for production
PLS_BASHRC="dev/.bashrc" # for development
PLS_PREFIX="[please!]"
PLS_MSG_INIT_ALREADY="$PLS_PREFIX I found '$PLS_FILE' - apparently 'please' is already initialized!"
PLS_MSG_INIT_OK="$PLS_PREFIX Successfully initialized!"

#
#   [[ FUNCTIONS ]]
#

# FUNCTION: help
pls_help() {
    # TODO
    echo "$PLS_PREFIX please help... (WIP)"
    exit 1
}

# FUNCTION: initialize
pls_init() {
    if [ -f "$PLS_FILE" ]; then
        echo "$PLS_MSG_INIT_ALREADY"
        exit 1
    else
        # create .please file with comment in $HOME
        echo "$PLS_FILE_COMMENT" >> "$PLS_FILE"
        # append alias to .bashrc
        echo "$PLS_ALIAS" >> "$PLS_BASHRC"
        # unnecessarily wait for it (to be removed)
        sleep .3
        # source .bashrc
        source "./$PLS_BASHRC"
        exit 0
    fi
}

#
#   [[ PARSE ARGS ]]
#

# TEST: no args?
[ $# -eq 0 ] && pls_help

# TEST: initialize?
[ "$1" = "initialize" ] && pls_init